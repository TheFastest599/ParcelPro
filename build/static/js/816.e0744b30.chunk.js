"use strict";(self.webpackChunkparcelpro_frontend=self.webpackChunkparcelpro_frontend||[]).push([[816],{816:(e,i,l)=>{l.r(i),l.d(i,{default:()=>u});var t=l(43),d=l(216),n=l(912),a=l(485),s=l(404),o=l(206),r=l(94),c=l(579);const u=function(){var e,i,l,u,g,m,p,x;document.title="ParcelPro | Delivery Partner";const v=(0,d.Zp)(),h=(0,t.useContext)(n.A),y=(0,t.useContext)(a.Y),{member:b,notify:f}=h,{fetchPackages:j,packages:k,addJob:w,updateJob:N,getPackage:F,packageDetails:A}=y,[C,D]=(0,t.useState)(!1),[S,P]=(0,t.useState)(null),[T,U]=(0,t.useState)(""),[I,O]=(0,t.useState)({otp:"",deliveryFailed:!1,deliveryFailAction:"",description:""}),J=e=>{const{name:i,value:l,type:t,checked:d}=e.target;O((e=>({...e,[i]:"checkbox"===t?d:l})))},R=e=>{e.preventDefault(),I.deliveryFailed||N({deliveryFailed:I.deliveryFailed,otp:I.otp}),I.deliveryFailed&&(I.deliveryFailAction&&I.description?N({deliveryFailed:I.deliveryFailed,deliveryFailAction:I.deliveryFailAction,description:I.description}):f("Please fill all the fields","warn"))};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"flex  justify-center space-x-2",children:[(0,c.jsx)("button",{className:"py-2 px-4 max-w-96 w-full text-base font-semibold text-white rounded-full focus:outline-none focus:ring-4 ".concat(b.engaged?"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-300":"bg-gray-400 cursor-not-allowed"),disabled:!0!==b.engaged,onClick:()=>{F(b.packageId),U("update package"),v("/company")},children:"Update Package"}),(0,c.jsx)("button",{className:"py-2 px-4 max-w-64 w-full text-base font-semibold text-white rounded-full focus:outline-none focus:ring-4 ".concat(b.engaged?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-300"),disabled:!0===b.engaged,onClick:()=>{U("fetch packages"),j("member","delivery partner")},children:"Fetch Packages"})]}),"fetch packages"===T&&!b.engaged&&(0,c.jsx)(r.A,{packages:k,addJob:w}),"update package"===T&&b.engaged&&(0,c.jsxs)("div",{className:"container mx-auto mt-4",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Update package"}),A&&(0,c.jsxs)("div",{className:"p-4 bg-white shadow-lg rounded-lg border border-gray-200 max-w-[600px] mx-auto",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,c.jsxs)("p",{className:"text-gray-700 font-semibold",children:[(0,c.jsx)("strong",{children:"Track ID:"})," ",null===A||void 0===A?void 0:A.trackID]}),(0,c.jsx)(o.A,{status:null===A||void 0===A?void 0:A.status})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm mb-2",children:[(0,c.jsxs)("div",{className:"text-gray-700 font-medium ",children:[(0,c.jsx)("strong",{children:"From:"}),(0,c.jsx)("p",{children:null===A||void 0===A||null===(e=A.sender)||void 0===e?void 0:e.name}),(0,c.jsxs)("p",{children:[null===A||void 0===A||null===(i=A.sender)||void 0===i?void 0:i.state,","," ",null===A||void 0===A||null===(l=A.sender)||void 0===l?void 0:l.cityVil,","," ",null===A||void 0===A||null===(u=A.sender)||void 0===u?void 0:u.pincode]})]}),(0,c.jsxs)("div",{className:"text-gray-700 font-medium ",children:[(0,c.jsx)("strong",{children:"To:"}),(0,c.jsx)("p",{children:null===A||void 0===A||null===(g=A.receiver)||void 0===g?void 0:g.name}),(0,c.jsxs)("p",{children:[null===A||void 0===A||null===(m=A.receiver)||void 0===m?void 0:m.state,","," ",null===A||void 0===A||null===(p=A.receiver)||void 0===p?void 0:p.cityVil,","," ",null===A||void 0===A||null===(x=A.receiver)||void 0===x?void 0:x.pincode]})]}),(0,c.jsxs)("div",{className:"text-gray-700 font-medium ",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Last Updated:"})," "]}),(0,c.jsxs)("p",{children:[null!==A&&void 0!==A&&A.lastUpdated?new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(A.lastUpdated)):"N/A",","," ",null!==A&&void 0!==A&&A.lastUpdated?new Date(A.lastUpdated).toLocaleTimeString():""]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-gray-700 font-medium ",children:[(0,c.jsx)("strong",{children:"Cost:"})," \u20b9",(null===A||void 0===A?void 0:A.cost)||"N/A"]}),(0,c.jsx)("button",{className:" py-1 px-4  text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-300",onClick:()=>(P(A),void D(!0)),children:"Details"})]})]}),(0,c.jsx)("hr",{}),!I.deliveryFailed&&(0,c.jsxs)("form",{onSubmit:R,className:"text-gray-700 font-medium my-2 grid grid-cols-6 gap-4 w-full  text-sm",children:[(0,c.jsxs)("div",{className:"col-span-4",children:[(0,c.jsx)("label",{htmlFor:"otp",className:"block text-xs",children:"Enter 6-digit OTP"}),(0,c.jsx)("input",{type:"text",id:"otp",name:"otp",value:I.otp,onChange:e=>{const{value:i}=e.target;/^\d{0,6}$/.test(i)&&O({...I,otp:i})},placeholder:"Enter OTP",className:"form-input text-center block w-full border-2 outline-none rounded-md border-gray-300 shadow-sm focus:border-gray-400 focus:ring focus:ring-gray-200 focus:ring-opacity-50 px-2 py-1"})]}),(0,c.jsx)("button",{type:"submit",className:"col-span-2 mt-4 w-full bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-300",children:"Submit OTP"})]}),(0,c.jsx)("div",{className:" border-b-2 border-gray-300 text-gray-700 font-medium",children:(0,c.jsxs)("label",{className:"inline-flex items-center space-x-2",children:[(0,c.jsx)("span",{children:"Delivery Failed?"}),(0,c.jsx)("input",{type:"checkbox",name:"deliveryFailed",checked:I.deliveryFailed,onChange:J,className:"form-checkbox size-4"})]})}),I.deliveryFailed&&(0,c.jsxs)("form",{onSubmit:R,className:"text-gray-700 font-medium my-2 grid grid-cols-6 gap-x-4 gap-y-2 w-full  text-sm",children:[(0,c.jsxs)("div",{className:"col-span-4",children:[(0,c.jsx)("label",{htmlFor:"deliveryFailAction",className:"block text-xs",children:"Select delivery fail action"}),(0,c.jsxs)("select",{id:"deliveryFailAction",name:"deliveryFailAction",value:I.deliveryFailAction,onChange:J,className:"form-input block w-full border-2 outline-none rounded-md border-gray-300 shadow-sm focus:border-gray-400 focus:ring focus:ring-gray-200 focus:ring-opacity-50 px-2 py-1",children:[(0,c.jsx)("option",{value:"",children:"Select Option"}),(0,c.jsx)("option",{value:"Failed Delivery Attempt",children:"Failed Delivery Attempt"}),(0,c.jsx)("option",{value:"Returned to Sender",children:"Returned to Sender"})]})]}),(0,c.jsx)("button",{type:"submit",className:"col-span-2 mt-4 w-full bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-300",children:"Confirm action"}),(0,c.jsxs)("div",{className:"col-span-4",children:[(0,c.jsx)("label",{htmlFor:"description",className:"block text-xs",children:"Reason/description for failed delivery"}),(0,c.jsx)("textarea",{id:"description",name:"description",value:I.description,onChange:J,placeholder:"Describe here..",rows:2,className:"form-input  block w-full border-2 outline-none rounded-md border-gray-300 shadow-sm focus:border-gray-400 focus:ring focus:ring-gray-200 focus:ring-opacity-50 px-2 py-1"})]})]})]},null===A||void 0===A?void 0:A.trackID)]}),C&&S&&(0,c.jsx)(s.A,{pkg:S,onClose:()=>{D(!1),P(null)}})]})}}}]);
//# sourceMappingURL=816.e0744b30.chunk.js.map