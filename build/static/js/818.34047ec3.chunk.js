/*! For license information please see 818.34047ec3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkparcelpro_frontend=self.webpackChunkparcelpro_frontend||[]).push([[818],{818:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var t=s(43),i=s(216),d=s(912),n=s(485),o=s(404),r=s(206);const l=(0,s(784).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var c=s(94),m=s(579);const g=function(){var e,a,s,g,u,x,p,h,v;document.title="ParcelPro | Driver";const b=(0,i.Zp)(),f=(0,t.useContext)(d.A),j=(0,t.useContext)(n.Y),{customer:y,member:k,customerLogout:N,notify:w}=f,{addPackage:D,fetchPackages:C,packages:U,setPackages:P,addJob:S,updateJob:A,getPackage:F,packageDetails:I}=j,[L,T]=(0,t.useState)(!1),[V,z]=(0,t.useState)(null),[G,H]=(0,t.useState)(""),[J,M]=(0,t.useState)({location:"",description:"",reachedDest:!1}),_=e=>{const{name:a,value:s,type:t,checked:i}=e.target;M((e=>({...e,[a]:"checkbox"===t?i:s})))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex  justify-center space-x-2",children:[(0,m.jsx)("button",{className:"py-2 px-4 max-w-96 w-full text-base font-semibold text-white rounded-full focus:outline-none focus:ring-4 ".concat(k.engaged?"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-300":"bg-gray-400 cursor-not-allowed"),disabled:!0!==k.engaged,onClick:()=>{F(k.packageId),H("update package"),b("/company")},children:"Update Package"}),(0,m.jsx)("button",{className:"py-2 px-4 max-w-64 w-full text-base font-semibold text-white rounded-full focus:outline-none focus:ring-4 ".concat(k.engaged?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-300"),disabled:!0===k.engaged,onClick:()=>{H("fetch packages"),C("member","driver")},children:"Fetch Packages"})]}),"fetch packages"===G&&!k.engaged&&(0,m.jsx)(c.A,{packages:U,addJob:S}),"update package"===G&&k.engaged&&(0,m.jsxs)("div",{className:"container mx-auto mt-4",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Update package"}),I&&(0,m.jsxs)("div",{className:"p-4 bg-white shadow-lg rounded-lg border border-gray-200 max-w-[600px] mx-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,m.jsxs)("p",{className:"text-gray-700 font-semibold",children:[(0,m.jsx)("strong",{children:"Track ID:"})," ",null===I||void 0===I?void 0:I.trackID]}),(0,m.jsx)(r.A,{status:null===I||void 0===I?void 0:I.status})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,m.jsxs)("div",{className:"text-gray-700 font-medium ",children:[(0,m.jsx)("strong",{children:"From:"}),(0,m.jsx)("p",{children:null===I||void 0===I||null===(e=I.sender)||void 0===e?void 0:e.name}),(0,m.jsxs)("p",{children:[null===I||void 0===I||null===(a=I.sender)||void 0===a?void 0:a.state,","," ",null===I||void 0===I||null===(s=I.sender)||void 0===s?void 0:s.cityVil,","," ",null===I||void 0===I||null===(g=I.sender)||void 0===g?void 0:g.pincode]})]}),(0,m.jsxs)("div",{className:"text-gray-700 font-medium ",children:[(0,m.jsx)("strong",{children:"To:"}),(0,m.jsx)("p",{children:null===I||void 0===I||null===(u=I.receiver)||void 0===u?void 0:u.name}),(0,m.jsxs)("p",{children:[null===I||void 0===I||null===(x=I.receiver)||void 0===x?void 0:x.state,","," ",null===I||void 0===I||null===(p=I.receiver)||void 0===p?void 0:p.cityVil,","," ",null===I||void 0===I||null===(h=I.receiver)||void 0===h?void 0:h.pincode]})]}),(0,m.jsxs)("div",{className:"text-gray-700 font-medium ",children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("strong",{children:"Last Updated:"})," "]}),(0,m.jsxs)("p",{children:[null!==I&&void 0!==I&&I.lastUpdated?new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(I.lastUpdated)):"N/A",","," ",null!==I&&void 0!==I&&I.lastUpdated?new Date(I.lastUpdated).toLocaleTimeString():""]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:"text-gray-700 font-medium ",children:[(0,m.jsx)("strong",{children:"Cost:"})," \u20b9",(null===I||void 0===I?void 0:I.cost)||"N/A"]}),(0,m.jsx)("button",{className:" py-1 px-4  text-sm bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition duration-300",onClick:()=>(z(I),void T(!0)),children:"Details"})]})]}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=J.location&&J.description;J.reachedDest&&J.location!=I.receiver.cityVil&&(a=!1,w("Given location and receiver city/village  doesn't match, cannot be destination","warn")),a&&A(J)},className:"grid grid-cols-6 gap-1 my-2 rounded-lg border-2 border-slate-200 p-1",children:[(0,m.jsx)("div",{className:"col-span-3 border-b-2 border-gray-300 text-gray-700 font-medium",children:(0,m.jsx)("strong",{children:"Update"})}),(0,m.jsx)("div",{className:"col-span-3 border-b-2 border-gray-300 text-gray-700 font-medium",children:(0,m.jsxs)("label",{className:"inline-flex items-center space-x-2",children:[(0,m.jsx)("span",{children:"Destination"}),(0,m.jsx)("input",{type:"checkbox",name:"reachedDest",checked:J.reachedDest,onChange:_,className:"form-checkbox size-4"})]})}),(0,m.jsxs)("div",{className:" col-span-5 rounded-md text-sm",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-medium text-xs px-1",htmlFor:"location",children:"Location"}),(0,m.jsx)("input",{type:"text",id:"location",name:"location",value:J.location,onChange:_,placeholder:"Update package's location",className:"form-input block w-full border-2 outline-none rounded-md border-gray-300 shadow-sm focus:border-gray-400 focus:ring focus:ring-gray-200 focus:ring-opacity-50 px-2 py-1"})]}),(0,m.jsx)("div",{className:"row-span-2 flex items-center justify-center rounded-md border-2 border-gray-300",children:(0,m.jsx)("button",{type:"submit",children:(0,m.jsx)(l,{className:"size-10 cursor-pointer text-gray-600"})})}),(0,m.jsxs)("div",{className:"col-span-5 rounded-md text-sm",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-medium text-xs px-1",htmlFor:"description",children:"Description"}),(0,m.jsx)("textarea",{id:"description",name:"description",value:J.description,onChange:_,placeholder:"Update description",rows:"2",className:"form-textarea block w-full border-2 outline-none rounded-md border-gray-300 shadow-sm focus:border-gray-400 focus:ring focus:ring-gray-200 focus:ring-opacity-50 px-2 py-1"})]})]}),(0,m.jsxs)("div",{className:"mt-2",children:[(0,m.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Location History"}),(0,m.jsx)("div",{className:"space-y-2",children:null===(v=I.transit)||void 0===v?void 0:v.status.slice().reverse().map((e=>(0,m.jsxs)("div",{className:"p-2 bg-white shadow-md rounded-lg border border-gray-200",children:[(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,m.jsx)("p",{className:"text-gray-700 font-semibold",children:e.location}),(0,m.jsxs)("p",{className:"text-gray-500 text-sm text-right",children:[new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(e.date)),", ",new Date(e.date).toLocaleTimeString()]})]}),(0,m.jsx)("p",{className:"text-gray-600",children:e.description})]},e._id)))})]})]},null===I||void 0===I?void 0:I.trackID)]}),L&&V&&(0,m.jsx)(o.A,{pkg:V,onClose:()=>{T(!1),z(null)}})]})}}}]);
//# sourceMappingURL=818.34047ec3.chunk.js.map